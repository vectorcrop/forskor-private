<style>
.btn-w{
  background-color: white;
  color: black;
}
</style>

<br />

<div class="page-content-wrapper" data-js="hero-demo">
  <div class="filters container-lg">
    <div class="image-gallery-carousel owl-carousel">
     <a href="/menu"> <button id="section" class="btn btn-w w-100 pb-2 pt-2" data-filter="*">show all</button></a>
      {{#each category}}
      <a href="/menus?category={{this.Name}}"><button class="btn btn-w w-100 pb-2 pt-2">{{this.Name}}</button></a>
      {{/each}}
    </div>
  </div>

  {{!-- Category Name is Getting here --}}
  {{!-- {{catName}} --}}

  <br /><br />
  <div class="grid">
    <div class="container-lg">
      <div class="row g-3 justify-content-center">
        {{#each products}}
        <!-- Single Blog Card-->
        <div class="element-item {{this.ParentCat}} metal" data-category="{{this.ParentCat}}">
          <div class="col-12 col-md-8 col-lg-7 col-xl-6">
            <div class="card shadow-sm blog-list-card">
              <div class="d-flex align-items-center">
                <img src="/images/product-images/{{this._id}}.png"
                  style="width: 40%; margin-left:20px; border-radius: 10px;" />
                <div class="card-blog-content"><span
                    class="badge bg-danger rounded-pill mb-2 d-inline-block">{{this.ParentCat}}</span><a
                    class="blog-title d-block text-dark" href="">{{this.Name}}</a>
                  <p class="sale-price" style="font-size: 1.25rem;line-height:1;color: #0134d4;font-weight: 500;">
                    ₹{{this.Offer}}<span
                      style="font-size: 1rem;margin-left: 0.25rem; text-decoration: line-through; color: #ea4c62;">₹{{this.Price}}</span>
                  </p>
                  <button class="btn btn-primary btn-sm" onclick="addToCart('{{this._id}}')">
                    Add to Bag
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
      </div>
    </div>
  </div>

</div>

<br /><br />

<script>
  function addToCart(productId) {
    $.ajax({
      url: "/add-to-cart/" + productId,
      method: "get",
      success: (response) => {
        if (response.status) {
          Swal.fire({
    toast: true,
    icon: 'success',
    title: response.message,
    animation: true,
    background: "#5cb85c",
    color: "white",
    position: 'bottom',
    showConfirmButton: false,
    timer: 3000,
    timerProgressBar: true,
    didOpen: (toast) => {
      toast.addEventListener('mouseenter', Swal.stopTimer)
      toast.addEventListener('mouseleave', Swal.resumeTimer)
    }
  })
          let count = $("#cart-count").html();
          count = parseInt(count) + 1;
          $("#cart-count").html(count);
        } else {
            Swal.fire({
    toast: true,
    icon: 'error',
    title: response.message,
    animation: true,
    position: 'top-right',
    showConfirmButton: false,
    timer: 3000,
    timerProgressBar: true,
    didOpen: (toast) => {
      toast.addEventListener('mouseenter', Swal.stopTimer)
      toast.addEventListener('mouseleave', Swal.resumeTimer)
    }
  })
          window.location = "/signin";
        }
      },
    });
  }
</script>